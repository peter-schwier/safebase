<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mocha Tests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>

    <script src="https://unpkg.com/chai@4/chai.js"></script>
    <script src="https://unpkg.com/mocha/mocha.js"></script>

    <script src="safebase.js"></script>
    <script>
      mocha.setup('bdd');
      mocha.checkLeaks();
      // Doc: https://www.chaijs.com/api/assert/
      let assert = chai.assert;
      describe('class SafeBase', function() {
        it('should exist', () => assert(SafeBase));
        it('is a class', () => assert.isFunction(SafeBase));
        describe('default instance of SafeBase', () => {
          let safeBase = null;
          before(() => safeBase = new SafeBase());
          it('should exist', () => assert(safeBase));
          it('should be a SafeBase', () => assert.instanceOf(safeBase, SafeBase));
        });
        describe('SafeBase#encode("\\u0000", ...) should equal the input', () => {
          [
            'asdf',
            '123',
            'Markus Kuhn [ˈmaʳkʊs kuːn] <mkuhn@acm.org> — 1999-08-20',
            '∮ E⋅da = Q,  n → ∞, ∑ f(i) = ∏ g(i), ∀x∈ℝ: ⌈x⌉ = −⌊−x⌋, α ∧ ¬β = ¬(¬α ∨ β),',
            'ℕ ⊆ ℕ₀ ⊂ ℤ ⊂ ℚ ⊂ ℝ ⊂ ℂ, ⊥ < a ≠ b ≡ c ≤ d ≪ ⊤ ⇒ (A ⇔ B),'
          ].forEach(s => {
            it(s, () => {
              assert.equal(new SafeBase().encode("\u0000", s), s);
            });
          });
        });
      });
      mocha.run();
    </script>
  </body>
</html>
